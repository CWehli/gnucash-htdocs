<?php 
  $homepage = false;
  include("lang.php");
  $title = T_("Download");
  $description = T_("Download executable bundles of the <span class=\"gnucash\">GnuCash</span> program inclusive documentation or the source files here. Several versions are available for recent and older operating systems.");
  $page = basename($_SERVER['SCRIPT_NAME']);
  include("externals/header.phtml");
  include("externals/menu.phtml"); 
?>

<div id="content">

  <h1><?php echo T_("Download GnuCash")?></h1>
    <p class="justify"><?=$description?></p>

  <div class="featureborder">
    <h2 class="featuretitle"><?php printf (T_("Stable release (%s)"), $latest_stable)?></h2>
  </div>
  <p class="justify"><?php echo T_("A stable release is a version of <span class=\"gnucash\">GnuCash</span> that is well tested and considered appropriate for every day use.")?></p>
  <p class="justify"><?php printf (T_("The latest stable release of <span class=\"gnucash\">GnuCash</span> is %s. Choose the download for your operating system below."), $latest_stable)?></p>

  <h3><?php echo T_("Installers")?></h3>
  <ul class="imagelist"><!-- ToDo: merge concat into format on next patch-po session -->
    <li class="imagelistitem" style="background-image: url(<?=$top_dir?>/images/icons/windows.png);"><?php printf (T_("GnuCash %s for"), $latest_stable)?> <a href="<?php echo $latest_stable_path.$latest_stable_win;?>"><?=\LABEL_WIN." ".\SUPPORTED_WIN?></a></li>
    <li class="imagelistitem" style="background-image: url(<?=$top_dir?>/images/icons/macosx.png);"><?php printf (T_("GnuCash %s for"), $latest_stable)?> <a href="<?php echo $latest_stable_path.$latest_stable_mac_intel;?>"><?=\LABEL_MAC." ".\SUPPORTED_MAC?></a></li>
  </ul>

  <a id="distribution"></a><h3>Linux</h3>
  <p class="justify"><?php echo T_("Most linux distributions come bundled with a version of <span class=\"gnucash\">GnuCash</span>, though it's not always the most recent version and it may not have been installed by default. Still it is recommended to use the <span class=\"gnucash\">GnuCash</span> version that comes with your distribution.");?></p>
  <p class="justify"><?php /* Translators: %s is the link to repology.org */
    printf (T_("At %s you can compare which distribution which version ships."), '<a href="https://repology.org/projects/?search=gnucash">repology.org</a>');?>
  </p>
  <p class="justify"><?php echo T_("Below are ways to install <span class=\"gnucash\">GnuCash</span> on some of the more popular distributions:");?></p>

  <ul class="imagelist">
    <li class="imagelistitem" style="background-image: url(<?=$top_dir?>/images/icons/fedora.png);"><b>Fedora: </b><?php echo T_("Fedora users can install <span class=\"gnucash\">GnuCash</span> through System->Administration->Add/Remove Software (Gnome) or Applications->System->Software Management (KDE).")?></li>
    <li class="imagelistitem" style="background-image: url(<?=$top_dir?>/images/icons/mandriva.png);"><b>Mandriva: </b><?php echo T_("Mandriva users can install <span class=\"gnucash\">GnuCash</span> through the Software Management in the Mandriva Linux Control Center.")?></li>
    <li class="imagelistitem" style="background-image: url(<?=$top_dir?>/images/icons/redhat.png);"><b>Redhat/Centos: </b><?php echo T_("Redhat and CentOS don't have <span class=\"gnucash\">GnuCash</span> in their repositories by default. It can be installed however from the third-party Epel repository. For more details on configuring this additional software repository for your setup, see");?> <a href="https://fedoraproject.org/wiki/EPEL"><?php echo T_("Epel's wiki page");?></a>.</li>
    <li class="imagelistitem" style="background-image: url(<?=$top_dir?>/images/icons/solus.png);"><b>Solus: </b><?php echo T_("Solus users can install <span class=\"gnucash\">GnuCash</span> through the Software Center (Office Software -> Financial Software -> gnucash).")?></li>
    <li class="imagelistitem" style="background-image: url(<?=$top_dir?>/images/icons/ubuntu.png);"><b>Ubuntu: </b><?php echo T_("Ubuntu users can install <span class=\"gnucash\">GnuCash</span> through the Software Center. This will install <span class=\"gnucash\">GnuCash</span> under the Office category in the Applications menu.")?></li>
  </ul>

  <h3><?php echo T_("Sandbox")?></h3>
  <ul class="imagelist">
    <li class="imagelistitem" style="background-image: url(<?=$top_dir?>/images/icons/flatpak.png);">
      <p class="justify"><?php printf (T_("An alternative to using your distribution's software manager is to use the Flatpak management system, which bundles all the necessary libraries for you. This can ease the installation of newer versions of GnuCash on older Linux machines. If you have <a href=\"%s\">Flatpak</a> installed, you can download any recent version of <span class=\"gnucash\">GnuCash</span> from"), $URL_FLATPAK)?></p>
      <p class="justify"><a href="<?php echo $URL_FLATHUB;?>"><img width='240' alt='Download on Flathub' src='https://flathub.org/assets/badges/flathub-badge-en.png'/></a></p>
      <p class="justify"><a href="<?php 
      /* Translators: %s is the base url of the gnucash wiki, adjust this,
         if a localized instance of the Flatpak page exists like "%sDe/Flatpak" */
        printf (T_("%sFlatpak"), $URL_WIKI);?>"><?php printf (T_("Known Issues and other details"));?></a></p>
    </li>
  </ul>

  <h3><?php echo T_("Source code")?></h3>
  <p class="justify"><?php echo T_("If you can't easily install <span class=\"gnucash\">GnuCash</span> in your distribution, or wish to install a different version than it ships with, you can build <span class=\"gnucash\">GnuCash</span> from source code as described in <a href='https://wiki.gnucash.org/wiki/Building'>the wiki</a>.")?></p>
  <ul class="imagelist">
    <li class="imagelistitem" style="background-image: url(<?=$top_dir?>/images/icons/package.png);"><a href="<?php echo $latest_stable_path.$latest_stable_source;?>">bzip2 compressed tarball</a> <?php printf (T_("for GnuCash %s"), $latest_stable)?></li>
  </ul>

  <?php
    # Only show unstable download options if there really is an active unstable release
    if ($show_unstable) { ?>
      <div class="featureborder">
      <h2 class="featuretitle"><?php printf (T_("Unstable/Development release (%s)"), $latest_unstable)?></h2>
      </div>
      <p class="justify"><?php echo T_("Unstable (development) releases are for testing purposes only. They contain the newest features and improvements, but possibly also bugs. Don't install these releases for everyday use.")?></p>
      <p class="justify"><?php printf (T_("The latest unstable release of <span class=\"gnucash\">GnuCash</span> (available below) is %s."), $latest_unstable)?></p>
      
      <ul>
        <li><?php printf (T_("GnuCash %s for"), $latest_unstable)?> <a href="<?php echo $latest_unstable_path.$latest_unstable_win;?>"><?=\LABEL_WIN." ".\SUPPORTED_WIN?></a></li>
        <li><?php printf (T_("GnuCash %s for"), $latest_unstable)?> <a href="<?php echo $latest_unstable_path.$latest_unstable_mac_intel;?>"><?=\LABEL_MAC." ".\SUPPORTED_MAC?></a></li>
        <li><a href="<?php echo $latest_unstable_path.$latest_unstable_source;?>">bzip2 compressed tarball</a> <?php printf (T_("for GnuCash %s"), $latest_unstable)?></li>
      </ul>
  <?php } ?>

  <?php
    # Only show old stable download options if there really is an active unstable release
    if ($old_stable) { ?>
      <div id="previous" class="featureborder">
        <h2 class="featuretitle"><?php printf (T_("Old Stable release (%s)"), $old_stable)?></h2>
      </div>
      <p class="justify"><?php echo T_("This old stable release is the final version of all bugfixes from the previous stable series without being a major upgrade.")?></p>
      <p class="justify"><?php printf (T_("The last old stable release of <span class=\"gnucash\">GnuCash</span> (available below) is %s."), $old_stable)?></p>
      
      <ul>
        <li><?php printf (T_("GnuCash %s for"), $old_stable)?> <a href="<?php echo $old_stable_path.$old_stable_win;?>">Microsoft Windows 7/8/10</a></li>
        <li><?php printf (T_("GnuCash %s for"), $old_stable)?> <a href="<?php echo $old_stable_path.$old_stable_mac_intel;?>">Apple OS X >= 10.9 "Mavericks" (Intel PC)</a></li>
        <li><a href="<?php echo $old_stable_path.$old_stable_source;?>">bzip2 compressed tarball</a> <?php printf (T_("for GnuCash %s"), $old_stable)?></li>
      </ul>
  <?php } ?>

  <?php
    # Only show historical download options if enabled
    if ($show_historical) { ?>
      <div id="historical" class="featureborder">
        <h2 class="featuretitle"><?php echo T_("Latest versions for historical operating systems") ?></h2>
      </div>
      <p class="justify"><?php echo T_("These versions are really old. No support is offered.")?></p>
      <ul>
        <li><?php printf (T_("GnuCash %s for"), $last_xp_vista_version)?>
          <ul>
            <li><a href="<?php echo $last_2_6_path.$last_xp_vista;?>">Microsoft Windows XP/Vista</a></li>
            <li><a href="<?php echo $last_2_6_path.$last_mac_ppc;?>">Mac OS X Power PC</a></li>
          </ul>
        </li>
        <li><?php printf (T_("GnuCash %s for"), $last_win2k_version)?> <a href="<?php echo $last_2_2_path.$last_win2k;?>">Microsoft Windows 2000</a></li>
      </ul>
  <?php } ?>

  <div class="featureborder">
    <h2 class="featuretitle"><?php echo T_("Other")?></h2>
  </div>

  <ul>
    <li><a href="<?php echo $latest_stable_path;?>"><?php printf (T_("View all GnuCash %s downloads (stable)"), $latest_stable)?></a></li>

    <?php
      # Only show unstable download options if there is an active unstable release
      if ($show_unstable) { ?>
        <li><a href="<?php echo $latest_unstable_path;?>"><?php printf (T_("View all GnuCash %s downloads (unstable)"), $latest_unstable)?></a></li>
    <?php } ?>
  
    <li><a href="https://sourceforge.net/projects/gnucash/files/"><?php echo T_("View all GnuCash downloads")?></a></li>
  </ul>

</div> <!-- content -->
<?php include("externals/footer.phtml"); ?>
